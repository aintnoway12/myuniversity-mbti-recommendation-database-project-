{% extends "base_no_nav.html" %}
{% block content %}

<h2 class="section-title"> í™œë™ ê´€ë¦¬ â€” {{ activity[1] }}</h2>

<!-- í™œë™ ì •ë³´ ì¹´ë“œ -->
<div class="card" style="margin-bottom:30px;">
    <p><b>ìœ í˜•:</b> {{ activity[2] }}</p>
    <p><b>ì„¤ëª…:</b> {{ activity[3] }}</p>
    <p><b>ë‚ ì§œ:</b> {{ activity[4] }} ~ {{ activity[5] }}</p>
    <p><b>ì°¸ì—¬ì:</b> {{ activity[7] }}/{{ activity[6] }}</p>
</div>

<hr>

<!-- ì°¸ì—¬ì ê²€ìƒ‰ -->
<h3 class="section-title">ğŸ” ì°¸ì—¬ì ê²€ìƒ‰</h3>
<form method="GET" action="/staff/activity/{{ activity[0] }}">
    <input class="form-input" type="text" name="search" placeholder="ì´ë¦„ / ë‹‰ë„¤ì„ / í•™ë²ˆ ê²€ìƒ‰"
           value="{{ keyword }}" style="width:300px;">
    <button class="btn" style="margin-left:10px;">ê²€ìƒ‰</button>
</form>

<hr>

<!-- ì°¸ì—¬ì ëª©ë¡ -->
<h3 class="section-title">ì°¸ì—¬ì ëª©ë¡</h3>

<table class="table">
    <tr>
        <th>í•™ë²ˆ</th>
        <th>ì´ë¦„</th>
        <th>ë‹‰ë„¤ì„</th>
        <th>ìƒíƒœ</th>
        <th>ì‹ ì²­ì¼</th>
        <th>ê´€ë¦¬</th>
    </tr>

    {% for m in members %}
    <tr>
        <td>{{ m[1] }}</td> <!-- student_id -->
        <td>{{ m[2] }}</td> <!-- name -->
        <td>{{ m[3] }}</td> <!-- nickname -->
        <td>{{ m[4] }}</td> <!-- status -->
        <td>{{ m[5] }}</td> <!-- registered_at -->

        <td>
            {% if m[4] == 'pending' %}
                <!-- ìŠ¹ì¸ -->
                <form method="POST" action="/staff/activity/{{ activity[0] }}/approve/{{ m[0] }}" style="display:inline;">
                    <button class="btn-success btn">ìŠ¹ì¸</button>
                </form>

                <!-- ê±°ì ˆ -->
                <form method="POST" action="/staff/activity/{{ activity[0] }}/reject/{{ m[0] }}" style="display:inline;">
                    <button class="btn-danger btn">ê±°ì ˆ</button>
                </form>
            {% else %}
                {{ m[4] }}
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>

<hr>

<!-- í™œë™ ìˆ˜ì • í¼ -->
<h3 class="section-title">âœ í™œë™ ìˆ˜ì •</h3>

<div class="card">
    <form method="POST" action="/staff/activity/{{ activity[0] }}/edit">

        <label class="form-label">í™œë™ëª…</label>
        <input class="form-input" name="name" value="{{ activity[1] }}">

        <label class="form-label">ìœ í˜•</label>
        <input class="form-input" name="type" value="{{ activity[2] }}">

        <label class="form-label">ì„¤ëª…</label>
        <textarea class="form-input" name="description">{{ activity[3] }}</textarea>

        <label class="form-label">ì‹œì‘ ë‚ ì§œ</label>
        <input type="date" name="start_date" class="form-input" value="{{ activity[4] }}">

        <label class="form-label">ì¢…ë£Œ ë‚ ì§œ</label>
        <input type="date" name="end_date" class="form-input" value="{{ activity[5] }}">

        <label class="form-label">ìµœëŒ€ ì¸ì›</label>
        <input type="number" name="max_participants" class="form-input" value="{{ activity[6] }}">

        <button class="btn" style="margin-top:20px;">ì €ì¥í•˜ê¸°</button>
    </form>
</div>

<hr>

<div style="text-align:center; margin-top:40px;">
    <a href="/logout" class="btn-outline" style="width:200px; display:inline-block;">
        ë¡œê·¸ì•„ì›ƒ
    </a>
</div>

{% endblock %}